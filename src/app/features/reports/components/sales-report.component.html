<div class="sales-report">
  <!-- Summary Cards -->
  <div class="summary-grid">
    <div class="summary-card">
      <div class="card-icon gradient-primary">
        <i class="bi bi-cart-check"></i>
      </div>
      <div class="card-content">
        <h3 class="card-title">Total Ventas</h3>
        <p class="card-value">{{ report.totalSales }}</p>
        <p class="card-period">{{ getPeriodLabel() }}</p>
      </div>
    </div>
    
    <div class="summary-card">
      <div class="card-icon gradient-success">
        <i class="bi bi-currency-dollar"></i>
      </div>
      <div class="card-content">
        <h3 class="card-title">Ingresos Totales</h3>
        <p class="card-value">${{ report.totalRevenue | number:'1.2-2' }}</p>
        <p class="card-period">{{ getPeriodLabel() }}</p>
      </div>
    </div>
    
    <div class="summary-card">
      <div class="card-icon gradient-warning">
        <i class="bi bi-graph-up"></i>
      </div>
      <div class="card-content">
        <h3 class="card-title">Valor Promedio</h3>
        <p class="card-value">${{ report.averageOrderValue | number:'1.2-2' }}</p>
        <p class="card-period">Por venta</p>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="charts-grid">
    <!-- Sales Trend Chart -->
    <div class="chart-container large">
      <div class="chart-header">
        <h3 class="chart-title">Tendencia de Ventas</h3>
      </div>
      <div class="chart-wrapper">
        <canvas #salesChartCanvas></canvas>
      </div>
    </div>

    <!-- Top Products Chart -->
    <div class="chart-container">
      <div class="chart-header">
        <h3 class="chart-title">Productos Top</h3>
      </div>
      <div class="chart-wrapper">
        <canvas #productChartCanvas></canvas>
      </div>
    </div>

    <!-- Payment Methods Chart -->
    <div class="chart-container">
      <div class="chart-header">
        <h3 class="chart-title">Métodos de Pago</h3>
      </div>
      <div class="chart-wrapper">
        <canvas #paymentChartCanvas></canvas>
      </div>
    </div>
  </div>

  <!-- Detailed Tables -->
  <div class="tables-grid">
    <!-- Products Table -->
    <div class="table-container">
      <div class="table-header">
        <h3 class="table-title">
          <i class="bi bi-box"></i>
          Productos Más Vendidos
        </h3>
      </div>
      <div class="table-content">
        <div class="table-responsive">
          <table class="data-table">
            <thead>
              <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Ingresos</th>
                <th>% del Total</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let product of report.salesByProduct.slice(0, 10)">
                <td class="product-name">{{ product.productName }}</td>
                <td class="quantity">{{ product.totalQuantity }}</td>
                <td class="revenue">${{ product.totalRevenue | number:'1.2-2' }}</td>
                <td class="percentage">
                  <div class="percentage-bar">
                    <div class="percentage-fill" [style.width.%]="product.percentage"></div>
                    <span class="percentage-text">{{ product.percentage | number:'1.1-1' }}%</span>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Payment Methods Table -->
    <div class="table-container">
      <div class="table-header">
        <h3 class="table-title">
          <i class="bi bi-credit-card"></i>
          Métodos de Pago
        </h3>
      </div>
      <div class="table-content">
        <div class="table-responsive">
          <table class="data-table">
            <thead>
              <tr>
                <th>Método</th>
                <th>Transacciones</th>
                <th>Ingresos</th>
                <th>% del Total</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let method of report.salesByPaymentMethod">
                <td class="method-name">
                  <i class="payment-icon" [class]="getPaymentIcon(method.method)"></i>
                  {{ getPaymentMethodLabel(method.method) }}
                </td>
                <td class="count">{{ method.count }}</td>
                <td class="revenue">${{ method.totalRevenue | number:'1.2-2' }}</td>
                <td class="percentage">
                  <div class="percentage-bar">
                    <div class="percentage-fill" [style.width.%]="method.percentage"></div>
                    <span class="percentage-text">{{ method.percentage | number:'1.1-1' }}%</span>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>