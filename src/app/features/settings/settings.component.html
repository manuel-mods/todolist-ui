<div class="settings-container">
  <div class="page-header">
    <h1 class="page-title">Settings</h1>
  </div>

  <!-- Success/Error Messages -->
  <div class="alert alert-success" *ngIf="successMessage()">
    <i class="fas fa-check-circle"></i>
    {{ successMessage() }}
  </div>

  <div class="alert alert-danger" *ngIf="errorMessage()">
    <i class="fas fa-exclamation-triangle"></i>
    {{ errorMessage() }}
  </div>

  <div class="settings-layout">
    <!-- Settings Tabs -->
    <div class="settings-sidebar">
      <nav class="settings-nav">
        <button 
          *ngFor="let tab of tabs"
          class="nav-item"
          [class.active]="activeTab() === tab.id"
          (click)="setActiveTab(tab.id)"
        >
          <i [class]="tab.icon"></i>
          <span>{{ tab.label }}</span>
        </button>
      </nav>
    </div>

    <!-- Settings Content -->
    <div class="settings-content">
      <!-- Notifications Tab -->
      <div class="settings-panel" *ngIf="activeTab() === 'notifications'">
        <div class="panel-header">
          <h2>Notification Preferences</h2>
          <p>Choose when and how you want to be notified</p>
        </div>

        <div class="panel-body">
          <div class="setting-group">
            <h3>Email Notifications</h3>
            
            <div class="setting-item">
              <div class="setting-info">
                <label>Email Notifications</label>
                <span>Receive email notifications for important updates</span>
              </div>
              <label class="toggle-switch">
                <input 
                  type="checkbox" 
                  [checked]="notifications().emailNotifications"
                  (change)="onNotificationChange('emailNotifications', $event)"
                >
                <span class="slider"></span>
              </label>
            </div>

            <div class="setting-item">
              <div class="setting-info">
                <label>Task Reminders</label>
                <span>Get reminded about upcoming task deadlines</span>
              </div>
              <label class="toggle-switch">
                <input 
                  type="checkbox" 
                  [checked]="notifications().taskReminders"
                  (change)="onNotificationChange('taskReminders', $event)"
                >
                <span class="slider"></span>
              </label>
            </div>

            <div class="setting-item">
              <div class="setting-info">
                <label>Project Updates</label>
                <span>Notifications when projects are shared or updated</span>
              </div>
              <label class="toggle-switch">
                <input 
                  type="checkbox" 
                  [checked]="notifications().projectUpdates"
                  (change)="onNotificationChange('projectUpdates', $event)"
                >
                <span class="slider"></span>
              </label>
            </div>

            <div class="setting-item">
              <div class="setting-info">
                <label>Weekly Digest</label>
                <span>Weekly summary of your tasks and projects</span>
              </div>
              <label class="toggle-switch">
                <input 
                  type="checkbox" 
                  [checked]="notifications().weeklyDigest"
                  (change)="onNotificationChange('weeklyDigest', $event)"
                >
                <span class="slider"></span>
              </label>
            </div>
          </div>

          <div class="panel-actions">
            <button 
              class="btn btn-primary"
              (click)="saveNotificationSettings()"
              [disabled]="loading()"
            >
              <i class="fas fa-save"></i>
              Save Notification Settings
            </button>
          </div>
        </div>
      </div>

      <!-- Privacy Tab -->
      <div class="settings-panel" *ngIf="activeTab() === 'privacy'">
        <div class="panel-header">
          <h2>Privacy & Security</h2>
          <p>Control your privacy and security preferences</p>
        </div>

        <div class="panel-body">
          <div class="setting-group">
            <h3>Profile Settings</h3>
            
            <div class="setting-item">
              <div class="setting-info">
                <label>Profile Visibility</label>
                <span>Who can see your profile information</span>
              </div>
              <select 
                class="form-select"
                [value]="privacy().profileVisibility"
                (change)="onPrivacyChange('profileVisibility', $event)"
              >
                <option value="public">Public</option>
                <option value="private">Private</option>
              </select>
            </div>

            <div class="setting-item">
              <div class="setting-info">
                <label>Allow Project Invites</label>
                <span>Let others invite you to their projects</span>
              </div>
              <label class="toggle-switch">
                <input 
                  type="checkbox" 
                  [checked]="privacy().allowProjectInvites"
                  (change)="onPrivacyChange('allowProjectInvites', $event)"
                >
                <span class="slider"></span>
              </label>
            </div>

            <div class="setting-item">
              <div class="setting-info">
                <label>Show Online Status</label>
                <span>Display when you're online to collaborators</span>
              </div>
              <label class="toggle-switch">
                <input 
                  type="checkbox" 
                  [checked]="privacy().showOnlineStatus"
                  (change)="onPrivacyChange('showOnlineStatus', $event)"
                >
                <span class="slider"></span>
              </label>
            </div>
          </div>

          <div class="panel-actions">
            <button 
              class="btn btn-primary"
              (click)="savePrivacySettings()"
              [disabled]="loading()"
            >
              <i class="fas fa-save"></i>
              Save Privacy Settings
            </button>
          </div>
        </div>
      </div>

      <!-- Display Tab -->
      <div class="settings-panel" *ngIf="activeTab() === 'display'">
        <div class="panel-header">
          <h2>Display & Language</h2>
          <p>Customize your interface preferences</p>
        </div>

        <div class="panel-body">
          <div class="setting-group">
            <h3>Appearance</h3>
            
            <div class="setting-item">
              <div class="setting-info">
                <label>Theme</label>
                <span>Choose your preferred color scheme</span>
              </div>
              <select 
                class="form-select"
                [value]="display().theme"
                (change)="onDisplayChange('theme', $event)"
              >
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="auto">Auto (System)</option>
              </select>
            </div>

            <div class="setting-item">
              <div class="setting-info">
                <label>Language</label>
                <span>Select your preferred language</span>
              </div>
              <select 
                class="form-select"
                [value]="display().language"
                (change)="onDisplayChange('language', $event)"
              >
                <option *ngFor="let lang of languages" [value]="lang.code">
                  {{ lang.name }}
                </option>
              </select>
            </div>

            <div class="setting-item">
              <div class="setting-info">
                <label>Date Format</label>
                <span>How dates are displayed throughout the app</span>
              </div>
              <select 
                class="form-select"
                [value]="display().dateFormat"
                (change)="onDisplayChange('dateFormat', $event)"
              >
                <option *ngFor="let format of dateFormats" [value]="format">
                  {{ format }}
                </option>
              </select>
            </div>

            <div class="setting-item">
              <div class="setting-info">
                <label>Time Format</label>
                <span>12-hour or 24-hour time format</span>
              </div>
              <select 
                class="form-select"
                [value]="display().timeFormat"
                (change)="onDisplayChange('timeFormat', $event)"
              >
                <option value="12h">12-hour (AM/PM)</option>
                <option value="24h">24-hour</option>
              </select>
            </div>
          </div>

          <div class="panel-actions">
            <button 
              class="btn btn-primary"
              (click)="saveDisplaySettings()"
              [disabled]="loading()"
            >
              <i class="fas fa-save"></i>
              Save Display Settings
            </button>
          </div>
        </div>
      </div>

      <!-- Integrations Tab -->
      <div class="settings-panel" *ngIf="activeTab() === 'integrations'">
        <div class="panel-header">
          <h2>Integrations</h2>
          <p>Connect with external services and tools</p>
        </div>

        <div class="panel-body">
          <div class="setting-group">
            <h3>Available Integrations</h3>
            
            <div class="integration-item">
              <div class="integration-info">
                <div class="integration-icon">
                  <i class="fab fa-google"></i>
                </div>
                <div>
                  <label>Google Calendar</label>
                  <span>Sync your tasks with Google Calendar</span>
                </div>
              </div>
              <button class="btn btn-outline-primary btn-sm">
                Connect
              </button>
            </div>

            <div class="integration-item">
              <div class="integration-info">
                <div class="integration-icon">
                  <i class="fab fa-slack"></i>
                </div>
                <div>
                  <label>Slack</label>
                  <span>Get notifications in your Slack workspace</span>
                </div>
              </div>
              <button class="btn btn-outline-primary btn-sm">
                Connect
              </button>
            </div>

            <div class="integration-item">
              <div class="integration-info">
                <div class="integration-icon">
                  <i class="fab fa-github"></i>
                </div>
                <div>
                  <label>GitHub</label>
                  <span>Link issues and pull requests to tasks</span>
                </div>
              </div>
              <button class="btn btn-outline-primary btn-sm">
                Connect
              </button>
            </div>
          </div>

          <div class="setting-group">
            <h3>Data Management</h3>
            
            <div class="action-buttons">
              <button class="btn btn-outline-secondary" (click)="exportData()">
                <i class="fas fa-download"></i>
                Export Data
              </button>
              <button class="btn btn-outline-warning" (click)="clearCache()">
                <i class="fas fa-trash"></i>
                Clear Cache
              </button>
              <button class="btn btn-outline-danger" (click)="resetToDefaults()">
                <i class="fas fa-undo"></i>
                Reset to Defaults
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>