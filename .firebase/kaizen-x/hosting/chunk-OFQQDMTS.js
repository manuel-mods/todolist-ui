import{a as K}from"./chunk-SVIYRKC5.js";import{a as J}from"./chunk-P2AP2LDR.js";import{b as z,c as F,d as L,e as A,g as B,h as G,i as R,j as H,k as $,l as q,m as X,n as Y,o as k,p as I,q as E}from"./chunk-B6CTW34R.js";import{r as N}from"./chunk-UEBHN7X3.js";import{Ca as S,Cb as t,Cc as M,Db as n,Dc as O,Eb as m,Fb as x,Gb as g,Ha as b,Hb as c,Ic as w,Pb as V,Qb as a,Rb as f,Sb as _,cb as l,ec as D,ma as P,mb as y,qb as p,ta as j,ua as v,va as C,xb as s,zb as h}from"./chunk-HT5E4KE5.js";function te(r,i){if(r&1&&(t(0,"div",12)(1,"div",13),a(2),n(),t(3,"div",14)(4,"span",15),a(5),n(),t(6,"span",16),a(7),n()()()),r&2){let e=c(2);l(2),_(" ",e.getUserInitials(e.selectedUser())," "),l(3),f(e.selectedUser().name),l(2),f(e.selectedUser().email)}}function ne(r,i){if(r&1&&(t(0,"div",17),m(1,"i",18),t(2,"span",19),a(3),n()()),r&2){let e=c(2);l(3),f(e.placeholder)}}function ie(r,i){if(r&1){let e=x();t(0,"div",24),g("click",function(){v(e);let d=c(3);return C(d.selectUser(null))}),t(1,"div",25),m(2,"i",26),n(),t(3,"div",14)(4,"span",15),a(5,"Unassigned"),n(),t(6,"span",16),a(7,"Remove assignment"),n()()()}}function re(r,i){r&1&&(t(0,"div",29),m(1,"i",30),n())}function oe(r,i){if(r&1){let e=x();t(0,"div",27),g("click",function(){let d=v(e).$implicit,u=c(3);return C(u.selectUser(d))}),t(1,"div",13),a(2),n(),t(3,"div",14)(4,"span",15),a(5),n(),t(6,"span",16),a(7),n()(),p(8,re,2,0,"div",28),n()}if(r&2){let e=i.$implicit,o=c(3);h("selected",o.isSelected(e)),l(2),_(" ",o.getUserInitials(e)," "),l(3),f(e.name),l(2),f(e.email),l(),s("ngIf",o.isSelected(e))}}function ae(r,i){r&1&&(t(0,"div",31),m(1,"i",32),t(2,"p",33),a(3,"No team members available"),n()())}function le(r,i){if(r&1&&(t(0,"div",20),p(1,ie,8,0,"div",21)(2,oe,9,6,"div",22)(3,ae,4,0,"div",23),n()),r&2){let e=c(2);l(),s("ngIf",e.allowUnassign&&e.selectedUser()),l(),s("ngForOf",e.availableUsers())("ngForTrackBy",e.trackByUserId),l(),s("ngIf",e.availableUsers().length===0)}}function se(r,i){if(r&1){let e=x();t(0,"div",6)(1,"div",7),g("click",function(){v(e);let d=c();return C(d.toggleDropdown())}),p(2,te,8,3,"div",8)(3,ne,4,1,"ng-template",null,0,D),t(5,"div",9),m(6,"i",10),n()(),p(7,le,4,4,"div",11),n()}if(r&2){let e=V(4),o=c();l(),h("active",o.showDropdown()),l(),s("ngIf",o.selectedUser())("ngIfElse",e),l(4),h("rotated",o.showDropdown()),l(),s("ngIf",o.showDropdown())}}function de(r,i){if(r&1){let e=x();t(0,"div",44)(1,"div",13),a(2),n(),t(3,"span",15),a(4),n(),t(5,"button",45),g("click",function(){let d=v(e).$implicit,u=c(3);return C(u.removeUser(d))}),m(6,"i",46),n()()}if(r&2){let e=i.$implicit,o=c(3);l(2),_(" ",o.getUserInitials(e)," "),l(2),f(e.name),l(),s("disabled",o.disabled)}}function ce(r,i){if(r&1&&(t(0,"div",40)(1,"h6",41),a(2),n(),t(3,"div",42),p(4,de,7,3,"div",43),n()()),r&2){let e=c(2);l(2),_("Selected Users (",e.selectedUsers().length,")"),l(2),s("ngForOf",e.selectedUsers())("ngForTrackBy",e.trackByUserId)}}function me(r,i){if(r&1){let e=x();t(0,"div",27),g("click",function(){let d=v(e).$implicit,u=c(3);return C(u.toggleUserSelection(d))}),t(1,"div",13),a(2),n(),t(3,"div",14)(4,"span",15),a(5),n(),t(6,"span",16),a(7),n()(),t(8,"div",52)(9,"input",53),g("click",function(d){return v(e),C(d.stopPropagation())})("change",function(){let d=v(e).$implicit,u=c(3);return C(u.toggleUserSelection(d))}),n()()()}if(r&2){let e=i.$implicit,o=c(3);h("selected",o.isSelected(e)),l(2),_(" ",o.getUserInitials(e)," "),l(3),f(e.name),l(2),f(e.email),l(2),s("checked",o.isSelected(e))}}function pe(r,i){r&1&&(t(0,"div",31),m(1,"i",32),t(2,"p",33),a(3,"All team members are already selected"),n()())}function ue(r,i){if(r&1){let e=x();t(0,"div",47)(1,"div",48)(2,"h6",49),a(3,"Add Team Members"),n(),t(4,"button",50),g("click",function(){v(e);let d=c(2);return C(d.closeDropdown())}),m(5,"i",46),n()(),t(6,"div",51),p(7,me,10,6,"div",22)(8,pe,4,0,"div",23),n()()}if(r&2){let e=c(2);l(7),s("ngForOf",e.availableUsers())("ngForTrackBy",e.trackByUserId),l(),s("ngIf",e.availableUsers().length===0)}}function ge(r,i){if(r&1){let e=x();t(0,"div",34),p(1,ce,5,3,"div",35),t(2,"div",36)(3,"button",37),g("click",function(){v(e);let d=c();return C(d.toggleDropdown())}),m(4,"i",38),a(5,"Add Users "),n(),p(6,ue,9,3,"div",39),n()()}if(r&2){let e=c();l(),s("ngIf",e.selectedUsers().length>0),l(2),s("disabled",e.disabled),l(3),s("ngIf",e.showDropdown())}}function fe(r,i){r&1&&(t(0,"div",54),m(1,"div",55),t(2,"span",19),a(3,"Loading users..."),n()())}function _e(r,i){if(r&1&&(t(0,"div",56),m(1,"i",57),a(2),n()),r&2){let e=c();l(2),_("",e.error()," ")}}var U=class r{users=[];selectedUserId;selectedUserIds=[];multiSelect=!1;disabled=!1;allowUnassign=!0;placeholder="Select user...";projectId;userSelected=new S;usersSelected=new S;userRemoved=new S;fb=P(k);selectedUser=b(null);selectedUsers=b([]);availableUsers=b([]);showDropdown=b(!1);loading=b(!1);error=b(null);ngOnInit(){this.initializeUsers(),this.setupInitialSelection()}ngOnChanges(){this.initializeUsers(),this.setupInitialSelection()}initializeUsers(){this.availableUsers.set(this.users)}setupInitialSelection(){if(this.multiSelect){let i=this.users.filter(e=>this.selectedUserIds.includes(e.id));this.selectedUsers.set(i)}else{let i=this.selectedUserId&&this.users.find(e=>e.id===this.selectedUserId)||null;this.selectedUser.set(i)}}toggleDropdown(){this.disabled||this.showDropdown.set(!this.showDropdown())}closeDropdown(){this.showDropdown.set(!1)}selectUser(i){this.disabled||(this.selectedUser.set(i),this.userSelected.emit(i),this.closeDropdown())}toggleUserSelection(i){if(this.disabled)return;let e=this.selectedUsers();if(this.isSelected(i)){let d=e.filter(u=>u.id!==i.id);this.selectedUsers.set(d),this.userRemoved.emit(i)}else{let d=[...e,i];this.selectedUsers.set(d)}this.usersSelected.emit(this.selectedUsers())}removeUser(i){if(!this.disabled){if(this.multiSelect){let e=this.selectedUsers().filter(o=>o.id!==i.id);this.selectedUsers.set(e),this.usersSelected.emit(e)}else this.selectedUser.set(null),this.userSelected.emit(null);this.userRemoved.emit(i)}}isSelected(i){return this.multiSelect?this.selectedUsers().some(e=>e.id===i.id):this.selectedUser()?.id===i.id}getUserInitials(i){return i.name?i.name.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):i.email.substring(0,2).toUpperCase()}trackByUserId(i,e){return e.id}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-user-selector"]],inputs:{users:"users",selectedUserId:"selectedUserId",selectedUserIds:"selectedUserIds",multiSelect:"multiSelect",disabled:"disabled",allowUnassign:"allowUnassign",placeholder:"placeholder",projectId:"projectId"},outputs:{userSelected:"userSelected",usersSelected:"usersSelected",userRemoved:"userRemoved"},features:[j],decls:5,vars:4,consts:[["noSelection",""],[1,"user-selector"],["class","single-selection",4,"ngIf"],["class","multi-selection",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","alert alert-danger alert-sm","role","alert",4,"ngIf"],[1,"single-selection"],[1,"current-selection",3,"click"],["class","selected-user",4,"ngIf","ngIfElse"],[1,"dropdown-arrow"],[1,"fas","fa-chevron-down"],["class","dropdown-menu",4,"ngIf"],[1,"selected-user"],[1,"user-avatar"],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"no-selection"],[1,"fas","fa-user-plus","text-muted","me-2"],[1,"text-muted"],[1,"dropdown-menu"],["class","dropdown-item unassign-option",3,"click",4,"ngIf"],["class","dropdown-item",3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","no-users",4,"ngIf"],[1,"dropdown-item","unassign-option",3,"click"],[1,"user-avatar","unassigned"],[1,"fas","fa-user-slash"],[1,"dropdown-item",3,"click"],["class","selection-indicator",4,"ngIf"],[1,"selection-indicator"],[1,"fas","fa-check"],[1,"no-users"],[1,"fas","fa-users","text-muted"],[1,"text-muted","mb-0"],[1,"multi-selection"],["class","selected-users",4,"ngIf"],[1,"add-users-section"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"fas","fa-plus","me-1"],["class","dropdown-menu multi-dropdown",4,"ngIf"],[1,"selected-users"],[1,"fw-bold","mb-2"],[1,"selected-users-list"],["class","selected-user-tag",4,"ngFor","ngForOf","ngForTrackBy"],[1,"selected-user-tag"],["type","button",1,"remove-btn",3,"click","disabled"],[1,"fas","fa-times"],[1,"dropdown-menu","multi-dropdown"],[1,"dropdown-header"],[1,"mb-0"],["type","button",1,"btn","btn-link","btn-sm","p-0",3,"click"],[1,"dropdown-body"],[1,"selection-checkbox"],["type","checkbox",3,"click","change","checked"],[1,"loading-state"],[1,"spinner-border","spinner-border-sm","text-primary","me-2"],["role","alert",1,"alert","alert-danger","alert-sm"],[1,"fas","fa-exclamation-triangle","me-2"]],template:function(e,o){e&1&&(t(0,"div",1),p(1,se,8,7,"div",2)(2,ge,7,3,"div",3)(3,fe,4,0,"div",4)(4,_e,3,1,"div",5),n()),e&2&&(l(),s("ngIf",!o.multiSelect),l(),s("ngIf",o.multiSelect),l(),s("ngIf",o.loading()),l(),s("ngIf",o.error()))},dependencies:[w,M,O,I,E],styles:[".user-selector[_ngcontent-%COMP%]{position:relative}.single-selection[_ngcontent-%COMP%]   .current-selection[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem;border:1px solid var(--gray-300);border-radius:var(--radius-md);background:#fff;cursor:pointer;transition:all .2s ease}.single-selection[_ngcontent-%COMP%]   .current-selection[_ngcontent-%COMP%]:hover{border-color:var(--primary-400)}.single-selection[_ngcontent-%COMP%]   .current-selection.active[_ngcontent-%COMP%]{border-color:var(--primary-500);box-shadow:0 0 0 .2rem #3b82f640}.single-selection[_ngcontent-%COMP%]   .current-selection[_ngcontent-%COMP%]   .selected-user[_ngcontent-%COMP%], .single-selection[_ngcontent-%COMP%]   .current-selection[_ngcontent-%COMP%]   .no-selection[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;gap:.75rem}.single-selection[_ngcontent-%COMP%]   .current-selection[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{margin-left:auto;transition:transform .2s ease}.single-selection[_ngcontent-%COMP%]   .current-selection[_ngcontent-%COMP%]   .dropdown-arrow.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.user-avatar[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--primary-100);color:var(--primary-700);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:600;text-transform:uppercase;flex-shrink:0}.user-avatar.unassigned[_ngcontent-%COMP%]{background:var(--gray-100);color:var(--gray-500)}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:500;color:var(--gray-900);font-size:.875rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-info[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{font-size:.75rem;color:var(--gray-500);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid var(--gray-300);border-radius:var(--radius-md);box-shadow:var(--shadow-lg);z-index:1000;max-height:300px;overflow-y:auto;margin-top:.25rem}.dropdown-menu.multi-dropdown[_ngcontent-%COMP%]{width:300px}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:between;padding:.75rem 1rem;border-bottom:1px solid var(--gray-200);background:var(--gray-50)}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-body[_ngcontent-%COMP%]{padding:.5rem 0}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;cursor:pointer;transition:background-color .2s ease}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:var(--gray-50)}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item.selected[_ngcontent-%COMP%]{background:var(--primary-50)}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item.unassign-option[_ngcontent-%COMP%]{border-bottom:1px solid var(--gray-200);margin-bottom:.5rem}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item.unassign-option[_ngcontent-%COMP%]:hover{background:var(--error-50)}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{flex:1}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]{color:var(--primary-600);font-size:.875rem}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .selection-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.dropdown-menu[_ngcontent-%COMP%]   .no-users[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem}.dropdown-menu[_ngcontent-%COMP%]   .no-users[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;opacity:.5}.multi-selection[_ngcontent-%COMP%]   .selected-users[_ngcontent-%COMP%]{margin-bottom:1rem}.multi-selection[_ngcontent-%COMP%]   .selected-users[_ngcontent-%COMP%]   .selected-users-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.multi-selection[_ngcontent-%COMP%]   .selected-users[_ngcontent-%COMP%]   .selected-user-tag[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:var(--primary-50);color:var(--primary-700);padding:.375rem .75rem;border-radius:var(--radius-lg);font-size:.875rem;border:1px solid var(--primary-200)}.multi-selection[_ngcontent-%COMP%]   .selected-users[_ngcontent-%COMP%]   .selected-user-tag[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:24px;height:24px;font-size:.75rem;background:var(--primary-200);color:var(--primary-800)}.multi-selection[_ngcontent-%COMP%]   .selected-users[_ngcontent-%COMP%]   .selected-user-tag[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:500}.multi-selection[_ngcontent-%COMP%]   .selected-users[_ngcontent-%COMP%]   .selected-user-tag[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--primary-600);padding:0;width:16px;height:16px;display:flex;align-items:center;justify-content:center;border-radius:50%;cursor:pointer;transition:all .2s ease}.multi-selection[_ngcontent-%COMP%]   .selected-users[_ngcontent-%COMP%]   .selected-user-tag[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-200);color:var(--primary-800)}.multi-selection[_ngcontent-%COMP%]   .selected-users[_ngcontent-%COMP%]   .selected-user-tag[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.multi-selection[_ngcontent-%COMP%]   .selected-users[_ngcontent-%COMP%]   .selected-user-tag[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.625rem}.loading-state[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;justify-content:center}.alert-sm[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem;margin-top:.5rem}@media (max-width: 768px){.dropdown-menu.multi-dropdown[_ngcontent-%COMP%]{width:100%;left:0;right:0}.selected-users-list[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.selected-users-list[_ngcontent-%COMP%]   .selected-user-tag[_ngcontent-%COMP%]{justify-content:space-between}}"]})};function ve(r,i){if(r&1&&(t(0,"label",9),a(1),n()),r&2){let e=c();l(),f(e.label)}}function Ce(r,i){if(r&1&&(t(0,"span",5),a(1),n()),r&2){let e=c().$implicit,o=c();l(),f(o.getPointLabel(e))}}function be(r,i){if(r&1){let e=x();t(0,"button",3),g("click",function(){let d=v(e).$implicit,u=c();return C(u.selectPoints(d))}),t(1,"span",4),a(2),n(),p(3,Ce,2,1,"span",10),n()}if(r&2){let e=i.$implicit,o=c();h("selected",o.selectedPoints===e)("disabled",o.disabled),s("disabled",o.disabled),l(2),f(e),l(),s("ngIf",o.showLabels)}}function xe(r,i){r&1&&(t(0,"div",11)(1,"div",12),m(2,"i",13),t(3,"strong"),a(4,"Estimation Guide"),n()(),t(5,"div",14)(6,"div",15)(7,"span",16),a(8,"1"),n(),t(9,"span",17),a(10,"Very small task (< 1 hour)"),n()(),t(11,"div",15)(12,"span",16),a(13,"2"),n(),t(14,"span",17),a(15,"Small task (1-2 hours)"),n()(),t(16,"div",15)(17,"span",16),a(18,"3"),n(),t(19,"span",17),a(20,"Medium task (2-4 hours)"),n()(),t(21,"div",15)(22,"span",16),a(23,"5"),n(),t(24,"span",17),a(25,"Large task (4-8 hours)"),n()(),t(26,"div",15)(27,"span",16),a(28,"8"),n(),t(29,"span",17),a(30,"Very large task (1-2 days)"),n()(),t(31,"div",15)(32,"span",16),a(33,"13"),n(),t(34,"span",17),a(35,"Extra large (2-3 days)"),n()(),t(36,"div",15)(37,"span",16),a(38,"21"),n(),t(39,"span",17),a(40,"Huge task (> 3 days, consider breaking down)"),n()()()())}function he(r,i){r&1&&(t(0,"span"),a(1,"Task not estimated yet"),n())}function Pe(r,i){if(r&1&&(t(0,"span")(1,"strong"),a(2),n(),a(3),n()),r&2){let e=c(2);l(2),_("",e.selectedPoints," story points"),l(),_(" - ",e.getComplexityLabel(e.selectedPoints)," ")}}function Se(r,i){if(r&1&&(t(0,"div",18)(1,"div",19),m(2,"i",20),p(3,he,2,0,"span",21)(4,Pe,4,2,"span",21),n()()),r&2){let e=c();l(3),s("ngIf",e.selectedPoints===null),l(),s("ngIf",e.selectedPoints!==null)}}var T=class r{selectedPoints;disabled=!1;showLabel=!0;showLabels=!1;showGuide=!1;label="Story Points";pointsSelected=new S;fibonacciSequence=[1,2,3,5,8,13,21];selectPoints(i){this.disabled||(this.selectedPoints=i,this.pointsSelected.emit(i))}getPointLabel(i){switch(i){case 1:return"XS";case 2:return"S";case 3:return"M";case 5:return"L";case 8:return"XL";case 13:return"XXL";case 21:return"Epic";default:return""}}getComplexityLabel(i){switch(i){case 1:return"Very simple task";case 2:return"Simple task";case 3:return"Moderate complexity";case 5:return"Complex task";case 8:return"Very complex";case 13:return"Highly complex";case 21:return"Epic-level complexity";default:return"Unknown complexity"}}trackByPoints(i,e){return e}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-story-points-selector"]],inputs:{selectedPoints:"selectedPoints",disabled:"disabled",showLabel:"showLabel",showLabels:"showLabels",showGuide:"showGuide",label:"label"},outputs:{pointsSelected:"pointsSelected"},decls:11,vars:10,consts:[[1,"story-points-selector"],["class","form-label fw-medium",4,"ngIf"],[1,"points-grid"],["type","button",1,"point-option",3,"click","disabled"],[1,"point-value"],[1,"point-label"],["type","button","class","point-option",3,"selected","disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","estimation-guide",4,"ngIf"],["class","selected-info",4,"ngIf"],[1,"form-label","fw-medium"],["class","point-label",4,"ngIf"],[1,"estimation-guide"],[1,"guide-header"],[1,"fas","fa-info-circle","me-1"],[1,"guide-content"],[1,"guide-item"],[1,"guide-points"],[1,"guide-description"],[1,"selected-info"],[1,"info-content"],[1,"fas","fa-chart-line","me-2","text-primary"],[4,"ngIf"]],template:function(e,o){e&1&&(t(0,"div",0),p(1,ve,2,1,"label",1),t(2,"div",2)(3,"button",3),g("click",function(){return o.selectPoints(null)}),t(4,"span",4),a(5,"?"),n(),t(6,"span",5),a(7,"Not estimated"),n()(),p(8,be,4,7,"button",6),n(),p(9,xe,41,0,"div",7)(10,Se,5,2,"div",8),n()),e&2&&(l(),s("ngIf",o.showLabel),l(2),h("selected",o.selectedPoints===null)("disabled",o.disabled),s("disabled",o.disabled),l(5),s("ngForOf",o.fibonacciSequence)("ngForTrackBy",o.trackByPoints),l(),s("ngIf",o.showGuide),l(),s("ngIf",o.selectedPoints!==void 0))},dependencies:[w,M,O],styles:[".story-points-selector[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{margin-bottom:.75rem;display:block}.points-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:.5rem;margin-bottom:1rem}.point-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.75rem .5rem;border:2px solid var(--gray-300);border-radius:var(--radius-lg);background:#fff;cursor:pointer;transition:all .2s ease;min-height:60px}.point-option[_ngcontent-%COMP%]:hover:not(.disabled){border-color:var(--primary-400);background:var(--primary-25);transform:translateY(-1px)}.point-option.selected[_ngcontent-%COMP%]{border-color:var(--primary-500);background:var(--primary-100);color:var(--primary-700);box-shadow:0 0 0 .2rem #3b82f640}.point-option.selected[_ngcontent-%COMP%]   .point-value[_ngcontent-%COMP%]{font-weight:700}.point-option.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;background:var(--gray-50)}.point-option[_ngcontent-%COMP%]   .point-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;line-height:1;margin-bottom:.25rem}.point-option[_ngcontent-%COMP%]   .point-label[_ngcontent-%COMP%]{font-size:.7rem;color:var(--gray-600);text-align:center;line-height:1.2}.point-option.selected[_ngcontent-%COMP%]   .point-label[_ngcontent-%COMP%]{color:var(--primary-600)}.point-option[_ngcontent-%COMP%]:first-child   .point-value[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--gray-500)}.point-option[_ngcontent-%COMP%]:first-child.selected   .point-value[_ngcontent-%COMP%]{color:var(--primary-600)}.estimation-guide[_ngcontent-%COMP%]{background:var(--gray-50);border:1px solid var(--gray-200);border-radius:var(--radius-md);padding:1rem;margin-bottom:1rem}.estimation-guide[_ngcontent-%COMP%]   .guide-header[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--gray-700);font-size:.875rem;margin-bottom:.75rem}.estimation-guide[_ngcontent-%COMP%]   .guide-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-500)}.estimation-guide[_ngcontent-%COMP%]   .guide-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:.5rem}.estimation-guide[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem}.estimation-guide[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]   .guide-points[_ngcontent-%COMP%]{background:var(--primary-100);color:var(--primary-700);width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.7rem;flex-shrink:0}.estimation-guide[_ngcontent-%COMP%]   .guide-item[_ngcontent-%COMP%]   .guide-description[_ngcontent-%COMP%]{color:var(--gray-600);line-height:1.3}.selected-info[_ngcontent-%COMP%]{background:var(--primary-25);border:1px solid var(--primary-200);border-radius:var(--radius-md);padding:.75rem}.selected-info[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;color:var(--primary-700)}@media (max-width: 768px){.points-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:.375rem}.point-option[_ngcontent-%COMP%]{padding:.5rem .25rem;min-height:50px}.point-option[_ngcontent-%COMP%]   .point-value[_ngcontent-%COMP%]{font-size:1rem}.point-option[_ngcontent-%COMP%]   .point-label[_ngcontent-%COMP%]{font-size:.65rem}.estimation-guide[_ngcontent-%COMP%]   .guide-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function ye(r,i){r&1&&m(0,"span",55)}function Me(r,i){r&1&&m(0,"i",56)}function Oe(r,i){if(r&1&&(t(0,"div",57),m(1,"i",58),a(2),n()),r&2){let e=c();l(2),_("",e.error()," ")}}function we(r,i){r&1&&(t(0,"div",59),a(1," El t\xEDtulo es requerido "),n())}function ke(r,i){if(r&1&&(t(0,"option",64),a(1),n()),r&2){let e=i.$implicit;s("value",e.id),l(),f(e.name)}}function Ie(r,i){r&1&&(t(0,"div",59),a(1," El proyecto es requerido "),n())}function Ee(r,i){if(r&1&&(t(0,"div",22)(1,"label",60),a(2,"Proyecto *"),n(),t(3,"select",61)(4,"option",62),a(5,"Seleccionar proyecto"),n(),p(6,ke,2,2,"option",63),n(),p(7,Ie,2,0,"div",25),n()),r&2){let e,o=c();l(6),s("ngForOf",o.projects),l(),s("ngIf",((e=o.taskForm.get("projectId"))==null?null:e.invalid)&&((e=o.taskForm.get("projectId"))==null?null:e.touched))}}function Ue(r,i){if(r&1&&(t(0,"div",22)(1,"label",48),a(2,"Proyecto"),n(),t(3,"div",65),m(4,"i",66),a(5),n()()),r&2){let e=c();l(5),_(" ",e.getProjectName(e.defaultProjectId)," ")}}var ee=class r{projects=[];users=[];defaultStatus="CREATED";defaultProjectId;activeModal=P(J);taskService=P(K);authService=P(N);fb=P(k);creating=b(!1);error=b(null);taskForm;constructor(){this.taskForm=this.fb.group({title:["",F.required],description:[""],projectId:["",F.required],status:[this.defaultStatus],priority:["medium"],assignedTo:[""],dueDate:[""],estimatedHours:[""],storyPoints:[""],labelsString:[""]})}ngOnInit(){this.taskForm.patchValue({status:this.defaultStatus,projectId:this.defaultProjectId||""})}createTask(){if(this.taskForm.invalid){this.taskForm.markAllAsTouched();return}this.creating.set(!0),this.error.set(null);let i=this.taskForm.value,e=this.authService.getCurrentUser();if(!e){this.error.set("User not authenticated"),this.creating.set(!1);return}let o={title:i.title,description:i.description||void 0,projectId:parseInt(i.projectId),status:i.status,priority:i.priority,assignedTo:i.assignedTo||void 0,dueDate:i.dueDate?new Date(i.dueDate):void 0,estimatedHours:i.estimatedHours?parseFloat(i.estimatedHours):void 0,storyPoints:i.storyPoints?parseInt(i.storyPoints):void 0,labels:i.labelsString?i.labelsString.split(",").map(d=>d.trim()).filter(d=>d):[],createdBy:e.id,createdAt:new Date};this.taskService.createTask(o.projectId,o).subscribe({next:d=>{this.creating.set(!1),this.activeModal.close(d)},error:d=>{this.error.set("Failed to create task. Please try again."),this.creating.set(!1)}})}getProjectName(i){return this.projects.find(o=>o.id===i)?.name||"Unknown Project"}onUserAssigned(i){this.taskForm.patchValue({assignedTo:i?.id||""})}onStoryPointsSelected(i){this.taskForm.patchValue({storyPoints:i||""})}getStoryPointsValue(){let i=this.taskForm.get("storyPoints")?.value;return!i||i===""?null:parseInt(i)}getProjectIdValue(){let i=this.defaultProjectId||this.taskForm.get("projectId")?.value;return i?parseInt(i):null}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-create-task-modal"]],inputs:{projects:"projects",users:"users",defaultStatus:"defaultStatus",defaultProjectId:"defaultProjectId"},decls:88,vars:20,consts:[[1,"fullscreen-modal-container"],[1,"fullscreen-modal-header"],[1,"header-content"],[1,"header-left"],[1,"header-icon"],[1,"fas","fa-plus-circle"],[1,"header-text"],[1,"header-title"],[1,"header-subtitle"],[1,"header-actions"],["type","button",1,"btn","btn-ghost",3,"click"],[1,"fas","fa-times"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["class","fas fa-save me-1",4,"ngIf"],[1,"fullscreen-modal-content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-8"],[1,"form-section"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"formGroup"],[1,"field-group"],["for","title",1,"field-label"],["type","text","id","title","formControlName","title","placeholder","Ingrese el t\xEDtulo de la tarea","autofocus","",1,"field-input"],["class","field-error",4,"ngIf"],["for","description",1,"field-label"],["id","description","rows","6","formControlName","description","placeholder","Ingrese la descripci\xF3n de la tarea...",1,"field-input","field-textarea"],["class","field-group",4,"ngIf"],["for","labels",1,"field-label"],["type","text","id","labels","formControlName","labelsString","placeholder","Ingrese etiquetas separadas por comas",1,"field-input"],[1,"field-help"],[1,"col-lg-4"],[1,"sidebar-section"],[1,"sidebar-title"],["for","status",1,"field-label"],["id","status","formControlName","status",1,"field-input"],["value","CREATED"],["value","IN_PROGRESS"],["value","BLOCKED"],["value","TESTING"],["value","READY_TO_FINISH"],["value","FINISHED"],["for","priority",1,"field-label"],["id","priority","formControlName","priority",1,"field-input"],["value","low"],["value","medium"],["value","high"],[1,"field-label"],["placeholder","Seleccionar responsable...",3,"userSelected","users","selectedUserId","multiSelect","allowUnassign","disabled"],["for","dueDate",1,"field-label"],["type","date","id","dueDate","formControlName","dueDate",1,"field-input"],["for","estimatedHours",1,"field-label"],["type","number","id","estimatedHours","formControlName","estimatedHours","min","0","step","0.5","placeholder","0",1,"field-input"],[3,"pointsSelected","selectedPoints","disabled","showGuide","showLabels"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-save","me-1"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"field-error"],["for","project",1,"field-label"],["id","project","formControlName","projectId",1,"field-input"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"field-display"],[1,"fas","fa-folder","me-2","text-primary"]],template:function(e,o){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m(5,"i",5),n(),t(6,"div",6)(7,"h1",7),a(8),n(),t(9,"p",8),a(10,"Complete los detalles para crear una nueva tarea"),n()()(),t(11,"div",9)(12,"button",10),g("click",function(){return o.activeModal.dismiss()}),m(13,"i",11),a(14," Cancelar "),n(),t(15,"button",12),g("click",function(){return o.createTask()}),p(16,ye,1,0,"span",13)(17,Me,1,0,"i",14),a(18),n()()()(),t(19,"div",15)(20,"div",16)(21,"div",17)(22,"div",18)(23,"div",19),p(24,Oe,3,1,"div",20),t(25,"form",21)(26,"div",22)(27,"label",23),a(28,"T\xEDtulo *"),n(),m(29,"input",24),p(30,we,2,0,"div",25),n(),t(31,"div",22)(32,"label",26),a(33,"Descripci\xF3n"),n(),m(34,"textarea",27),n(),p(35,Ee,8,2,"div",28)(36,Ue,6,1,"div",28),t(37,"div",22)(38,"label",29),a(39,"Etiquetas"),n(),m(40,"input",30),t(41,"small",31),a(42,"Separe m\xFAltiples etiquetas con comas"),n()()()()(),t(43,"div",32)(44,"div",33)(45,"h3",34),a(46,"Configuraci\xF3n"),n(),t(47,"form",21)(48,"div",22)(49,"label",35),a(50,"Estado"),n(),t(51,"select",36)(52,"option",37),a(53,"Creada"),n(),t(54,"option",38),a(55,"En Progreso"),n(),t(56,"option",39),a(57,"Bloqueada"),n(),t(58,"option",40),a(59,"En Pruebas"),n(),t(60,"option",41),a(61,"Lista para Terminar"),n(),t(62,"option",42),a(63,"Terminada"),n()()(),t(64,"div",22)(65,"label",43),a(66,"Prioridad"),n(),t(67,"select",44)(68,"option",45),a(69,"Baja"),n(),t(70,"option",46),a(71,"Media"),n(),t(72,"option",47),a(73,"Alta"),n()()(),t(74,"div",22)(75,"label",48),a(76,"Asignado a"),n(),t(77,"app-user-selector",49),g("userSelected",function(u){return o.onUserAssigned(u)}),n()(),t(78,"div",22)(79,"label",50),a(80,"Fecha l\xEDmite"),n(),m(81,"input",51),n(),t(82,"div",22)(83,"label",52),a(84,"Horas estimadas"),n(),m(85,"input",53),n(),t(86,"div",22)(87,"app-story-points-selector",54),g("pointsSelected",function(u){return o.onStoryPointsSelected(u)}),n()()()()()()()()()),e&2){let d,u;l(8),_(" ",o.defaultProjectId?"Crear Nueva Tarea en "+o.getProjectName(o.defaultProjectId):"Crear Nueva Tarea"," "),l(7),s("disabled",o.taskForm.invalid||o.creating()),l(),s("ngIf",o.creating()),l(),s("ngIf",!o.creating()),l(),_(" ",o.creating()?"Creando...":"Crear Tarea"," "),l(6),s("ngIf",o.error()),l(),s("formGroup",o.taskForm),l(5),s("ngIf",((d=o.taskForm.get("title"))==null?null:d.invalid)&&((d=o.taskForm.get("title"))==null?null:d.touched)),l(5),s("ngIf",!o.defaultProjectId),l(),s("ngIf",o.defaultProjectId),l(11),s("formGroup",o.taskForm),l(30),s("users",o.users)("selectedUserId",(u=o.taskForm.get("assignedTo"))==null?null:u.value)("multiSelect",!1)("allowUnassign",!0)("disabled",o.creating()),l(10),s("selectedPoints",o.getStoryPointsValue())("disabled",o.creating())("showGuide",!1)("showLabels",!0)}},dependencies:[w,M,O,I,B,q,X,z,G,$,L,A,Y,E,R,H,U,T],styles:[".fullscreen-modal-container[_ngcontent-%COMP%]{position:fixed;inset:0;background:#fafafa;z-index:1055;display:flex;flex-direction:column}.fullscreen-modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;border-bottom:1px solid rgba(255,255,255,.1);flex-shrink:0}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;max-width:1200px;margin:0 auto}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#ffffff26;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.header-text[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin:0;line-height:1.2}.header-text[_ngcontent-%COMP%]   .header-subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;opacity:.9;font-size:.95rem}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.btn-ghost[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.3);color:#fff;padding:.5rem 1rem;border-radius:8px;transition:all .2s ease}.btn-ghost[_ngcontent-%COMP%]:hover{background:#ffffff1a;border-color:#ffffff80}.fullscreen-modal-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:2rem}.container-fluid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000000d}.sidebar-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000000d;height:fit-content;position:sticky;top:0}.sidebar-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0 0 1.5rem;padding-bottom:.75rem;border-bottom:2px solid #f3f4f6}.field-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.field-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#374151;margin-bottom:.5rem}.field-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:.875rem;transition:all .2s ease;background:#fff}.field-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.field-input.field-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.field-display[_ngcontent-%COMP%]{padding:.75rem;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;color:#6b7280;font-size:.875rem}.field-error[_ngcontent-%COMP%]{color:#dc2626;font-size:.75rem;margin-top:.25rem}.field-help[_ngcontent-%COMP%]{color:#6b7280;font-size:.75rem;margin-top:.25rem;display:block}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;padding:.5rem 1.5rem;border-radius:8px;font-weight:500;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 992px){.fullscreen-modal-header[_ngcontent-%COMP%]{padding:1rem}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.header-actions[_ngcontent-%COMP%]{justify-content:center}.fullscreen-modal-content[_ngcontent-%COMP%]{padding:1rem}.form-section[_ngcontent-%COMP%], .sidebar-section[_ngcontent-%COMP%]{padding:1.5rem}.col-lg-4[_ngcontent-%COMP%]{margin-top:1rem}}@media (max-width: 576px){.header-text[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:1.25rem}.form-section[_ngcontent-%COMP%], .sidebar-section[_ngcontent-%COMP%]{padding:1rem}}"]})};export{U as a,T as b,ee as c};
